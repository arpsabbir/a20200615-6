<?php  namespace app\comadmin\controller;
use think\Controller;
use think\Db;
use think\Request;
use think\Session;
use think\View;
class News extends Controller
{
	public function index()
	{
		if(check_login())
		{
			$this->assign('page',1);
			$var_3615=Db::table('ims_sudu8_page_com_news')->where('type',1)->order('num desc,id desc')->paginate(10);
			$var_3616=Db::table('ims_sudu8_page_com_news')->where('type',1)->count();
			$this->assign(count,$var_3616);
			$this->assign('list',$var_3615);
			return $this->fetch(index);
		}
		else
		{
			$this->redirect('Index/Login/index');
		}
	}
	public function add()
	{
		if(check_login())
		{
			$var_3618=input('newsid');
			if($var_3618)
			{
				$var_3619=Db::table('ims_sudu8_page_com_news')->where('id',$var_3618)->find();
			}
			else
			{
				$var_3619='';
			}
			$this->assign('page',1);
			$this->assign('newsid',$var_3618);
			$this->assign('newsinfo',$var_3619);
			return $this->fetch(add);
		}
		else
		{
			$this->redirect('Index/login/index');
		}
	}
	public function save()
	{
		$var_3621=array();
		$var_3622=input('num');
		if($var_3622)
		{
			$var_3621['num']=intval($var_3622);
		}
		$var_3623=input('flag');
		if($var_3623)
		{
			$var_3621['flag']=intval($var_3623);
		}
		$var_3624=input('recommend');
		if($var_3624)
		{
			$var_3621['recommend']=intval($var_3624);
		}
		else
		{
			$var_3621['recommend']=2;
		}
		$var_3625=input('hits');
		if($var_3625)
		{
			$var_3621['hits']=intval($var_3625);
		}
		$var_3626=input('tips');
		if($var_3626)
		{
			$var_3621['tips']=$var_3626;
		}
		$var_3627=input('title');
		if($var_3627)
		{
			$var_3621['title']=$var_3627;
		}
		$var_3628=input('descs');
		if($var_3628)
		{
			$var_3621['descs']=$var_3628;
		}
		$var_3629=input('remarks');
		if($var_3629)
		{
			$var_3621['remarks']=$var_3629;
		}
		$var_3630=input('text');
		if($var_3630)
		{
			$var_3621['text']=$var_3630;
		}
		$var_3631=input('newsid');
		$var_3621['type']=1;
		if($var_3631)
		{
			$var_3632=strtotime(input('createtime'));
			if($var_3632>0)
			{
				$var_3621['createtime']=$var_3632;
			}
			$var_3633=Db::table('ims_sudu8_page_com_news')->where('id',$var_3631)->update($var_3621);
		}
		else
		{
			$var_3632=strtotime(input('createtime'));
			if($var_3632>0)
			{
				$var_3621['createtime']=$var_3632;
			}
			else
			{
				$var_3621['createtime']=time();
			}
			$var_3633=Db::table('ims_sudu8_page_com_news')->insert($var_3621);
		}
		if($var_3633)
		{
			$this->success('更新成功！');
		}
		else
		{
			$this->error('更新失败，没有修改项！');
			exit;
		}
	}
	public function del()
	{
		$var_3635=input('newsid');
		if($var_3635)
		{
			$var_3636=Db::table('ims_sudu8_page_com_news')->where('id',$var_3635)->delete();
			if($var_3636)
			{
				$this->success('删除成功');
			}
			else
			{
				$this->error('删除失败');
				exit;
			}
		}
	}
	public function gg()
	{
		if(check_login())
		{
			$this->assign('page',1);
			$var_3637=Db::table('ims_sudu8_page_com_news')->where('type',2)->order('num desc,id desc')->paginate(10);
			$var_2994=Db::table('ims_sudu8_page_com_news')->where('type',2)->count();
			$this->assign(count,$var_2994);
			$this->assign('list',$var_3637);
			return $this->fetch(gg);
		}
		else
		{
			$this->redirect('Index/Login/index');
		}
	}
	public function addgg()
	{
		if(check_login())
		{
			$var_3639=input('newsid');
			if($var_3639)
			{
				$var_3640=Db::table('ims_sudu8_page_com_news')->where('id',$var_3639)->find();
			}
			else
			{
				$var_3640='';
			}
			$this->assign('page',1);
			$this->assign('newsid',$var_3639);
			$this->assign('newsinfo',$var_3640);
			return $this->fetch(addgg);
		}
		else
		{
			$this->redirect('Index/login/index');
		}
	}
	public function savegg()
	{
		$var_3642=array();
		$var_3643=input('num');
		if($var_3643)
		{
			$var_3642['num']=intval($var_3643);
		}
		$var_3644=input('flag');
		if($var_3644)
		{
			$var_3642['flag']=intval($var_3644);
		}
		$var_3645=input('recommend');
		if($var_3645)
		{
			$var_3642['recommend']=intval($var_3645);
		}
		else
		{
			$var_3642['recommend']=2;
		}
		$var_3646=input('hits');
		if($var_3646)
		{
			$var_3642['hits']=intval($var_3646);
		}
		$var_1639=input('tips');
		if($var_1639)
		{
			$var_3642['tips']=$var_1639;
		}
		$var_3647=input('title');
		if($var_3647)
		{
			$var_3642['title']=$var_3647;
		}
		$var_3648=input('descs');
		if($var_3648)
		{
			$var_3642['descs']=$var_3648;
		}
		$var_3649=input('remarks');
		if($var_3649)
		{
			$var_3642['remarks']=$var_3649;
		}
		$var_3650=input('text');
		if($var_3650)
		{
			$var_3642['text']=$var_3650;
		}
		$var_3651=input('newsid');
		$var_3642['type']=2;
		if($var_3651)
		{
			$var_3652=strtotime(input('createtime'));
			if($var_3652>0)
			{
				$var_3642['createtime']=$var_3652;
			}
			$var_3653=Db::table('ims_sudu8_page_com_news')->where('id',$var_3651)->update($var_3642);
		}
		else
		{
			$var_3652=strtotime(input('createtime'));
			if($var_3652>0)
			{
				$var_3642['createtime']=$var_3652;
			}
			else
			{
				$var_3642['createtime']=time();
			}
			$var_3653=Db::table('ims_sudu8_page_com_news')->insert($var_3642);
		}
		if($var_3653)
		{
			$this->success('更新成功！');
		}
		else
		{
			$this->error('更新失败，没有修改项！');
			exit;
		}
	}
	public function update()
	{
		if(check_login())
		{
			$this->assign('page',1);
			$var_165=Db::table('ims_sudu8_page_com_news')->where('type',3)->order('num desc,id desc')->paginate(10);
			$var_3654=Db::table('ims_sudu8_page_com_news')->where('type',3)->count();
			$this->assign(count,$var_3654);
			$this->assign('list',$var_165);
			return $this->fetch(update);
		}
		else
		{
			$this->redirect('Index/Login/index');
		}
	}
	public function addupdate()
	{
		if(check_login())
		{
			$var_3656=input('newsid');
			if($var_3656)
			{
				$var_3657=Db::table('ims_sudu8_page_com_news')->where('id',$var_3656)->find();
			}
			else
			{
				$var_3657='';
			}
			$this->assign('page',1);
			$this->assign('newsid',$var_3656);
			$this->assign('newsinfo',$var_3657);
			return $this->fetch(addupdate);
		}
		else
		{
			$this->redirect('Index/login/index');
		}
	}
	public function saveupdate()
	{
		$var_3659=array();
		$var_3660=input('num');
		if($var_3660)
		{
			$var_3659['num']=intval($var_3660);
		}
		$var_3661=input('flag');
		if($var_3661)
		{
			$var_3659['flag']=intval($var_3661);
		}
		$var_3662=input('recommend');
		if($var_3662)
		{
			$var_3659['recommend']=intval($var_3662);
		}
		else
		{
			$var_3659['recommend']=3;
		}
		$var_378=input('hits');
		if($var_378)
		{
			$var_3659['hits']=intval($var_378);
		}
		$var_3663=input('tips');
		if($var_3663)
		{
			$var_3659['tips']=$var_3663;
		}
		$var_312=input('title');
		if($var_312)
		{
			$var_3659['title']=$var_312;
		}
		$var_3664=input('descs');
		if($var_3664)
		{
			$var_3659['descs']=$var_3664;
		}
		$var_3665=input('remarks');
		if($var_3665)
		{
			$var_3659['remarks']=$var_3665;
		}
		$var_3666=input('text');
		if($var_3666)
		{
			$var_3659['text']=$var_3666;
		}
		$var_3667=input('newsid');
		$var_3659['type']=3;
		if($var_3667)
		{
			$var_3668=strtotime(input('createtime'));
			if($var_3668>0)
			{
				$var_3659['createtime']=$var_3668;
			}
			$var_3669=Db::table('ims_sudu8_page_com_news')->where('id',$var_3667)->update($var_3659);
		}
		else
		{
			$var_3668=strtotime(input('createtime'));
			if($var_3668>0)
			{
				$var_3659['createtime']=$var_3668;
			}
			else
			{
				$var_3659['createtime']=time();
			}
			$var_3669=Db::table('ims_sudu8_page_com_news')->insert($var_3659);
		}
		if($var_3669)
		{
			$this->success('更新成功！');
		}
		else
		{
			$this->error('更新失败，没有修改项！');
			exit;
		}
	}
}
?>